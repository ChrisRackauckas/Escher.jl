<!-- generic signal -->
<polymer-element name="reactive-signal" attributes="signalId value">

<template>
    <core-localstorage name="reactive-signal-{{signalId}}" value="{{value}}">
    </core-localstorage>
</template>

<script>
    Polymer({
        queue: [], // TODO
        domReady: function () {
            this.fire("signal-setup", { originator: this.uuid, this.signalId, value: this.value })
        },
        fireUpdate: function () {
            this.fire("signal-updated", { originator: this.uuid, signalId: this.signalId, value: this.value })
        },
        valueChanged: function () {
            this.fireUpdate()
        }
    })
</script>

</polymer-element>

<!-- signal attribute value upon trigger -->
<polymer-element
    name="attribute-signal"
    attributes="signalId trigger name"
    extends="reactive-signal">

<template></template>

<script>
    Polymer({
        trigger: "change",
        name: "value",
        elem: null,
        domReady: function () {
            var self = this
            this.elem = this.elem || this.parentNode
            this.parentNode.addEventListener(this.trigger, function (ev) {
                self.value = this[self.name]
            })
            this.super()
        }
    })
</script>

</polymer-element>

<!-- more elements:

    signal-absorb signalId
    signal-sampleon signalId1 signalId2
-->

<polymer-element name="signal-sampleon">
</polymer-element>
